= pinus-flexilis

Agathis Management Controller (MC) CLI specification.

== Assumptions

  * the CLI is normally accessed by connecting to the service port
  * the user of this interface has a service profile (can change configuration, no access to data links)
  * the first service user (default service user) is the test engineer on the production line of the module
//  * the default service user does not need any credentials to get the MC (TMC or MMC) to answer
//  * the default service user credentials can be changed in the field by an admin (first customer) accessing the Agathis system/stack from a data link
  * the prompt line displays the MC id (MAC address)
  * commands are organized hierarchically

== Built-in Commands

=== pwd

Shows the current hierarchy level (path)

=== ls

List commands available in the current level

=== cd

Change the command hierarchy level (path)

== Command Levels

The commands are organized in the following levels:

  * (root) - commands for the local MC
    ** <<cmd_root_info>>
    ** <<cmd_root_set>>
    ** <<cmd_root_save>>
  * lcl - commands for local devices
    ** pwr
    ** clk
    ** pps
    ** jtag
    ** usb
    ** pcie
  * mod - commands for other MCs
    ** <<cmd_mod_info>>
    ** <<cmd_mod_id>>
    ** <<cmd_mod_reset>>
    ** <<cmd_mod_on>>
    ** <<cmd_mod_off>>

== root Commands

[#cmd_root_info]
=== info

Shows information about the module:

  * capabilities
  * alarms
  * manufacturer name / PN / SN

[#cmd_root_set]
=== set

Sets configuration options on the module.

  * set master [on|off]
  ** *on* sets the current module as master
  ** *anything else than on* sets the current module as

[#cmd_root_save]
=== save

Save configuration.

== mod Commands

[#cmd_mod_info]
=== info

Shows information about the other modules in the system:

* id (for local use)
* identifier (MAC)
* number of seconds since last seen

[#cmd_mod_id]
=== id

Identifies the remote MC. Usually this is done by blinking a LED.

[#cmd_mod_reset]
=== reset

Resets the remote MC.

[#cmd_mod_on]
=== on

Powers on the remote MC.

[#cmd_mod_off]
=== off

Powers off the remote MC.
